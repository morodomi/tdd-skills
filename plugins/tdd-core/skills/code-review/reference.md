# Code Review - Reference

## 詳細なレビュー観点

### 観点1: Correctness

- 論理エラー・バグ
- エッジケース処理（null、空文字、境界値）
- 条件分岐の誤り
- 例外処理の欠如

### 観点2: Performance

- アルゴリズム効率（O記法）
- N+1問題
- 不要なループ・計算
- メモリ使用パターン

### 観点3: Security

- 入力バリデーションの欠如
- 認証・認可チェックの不足
- SQLインジェクション・XSSリスク
- 機密データの露出

## 出力形式

問題を発見した場合:

```markdown
### [問題タイトル]
- **観点**: Correctness / Performance / Security
- **重要度**: Critical / Important / Optional
- **ファイル**: path/to/file.ext:行番号
- **問題**: 具体的な問題の説明
- **修正案**: 具体的なコード例
```

## 結果統合の出力例

```
================================================================================
code-review 完了
================================================================================
問題: X件（Critical: A, Important: B, Optional: C）

🔴 Critical: [問題タイトル]
   - ファイル: path/to/file.ext:行番号
   - 問題: [詳細]
   - 修正案: [コード例]

🟡 Important: [問題タイトル]
   - ファイル: path/to/file.ext:行番号
   - 問題: [詳細]
   - 改善案: [コード例]

🟢 Optional: [問題タイトル]
   - ファイル: path/to/file.ext:行番号
   - 提案: [詳細]
================================================================================
```

## 問題なしの場合

```
================================================================================
code-review 完了 - 問題なし
================================================================================
COMMITフェーズに進みます。
================================================================================
```

## ループ検出の詳細

### Review Logの役割

Cycle docにReview Logを記録することで、同じサイクル内で何回code-reviewが実行されたかを追跡。

### 2回目以降のルール

- GREENに戻るオプションは表示されない
- Issue作成またはCOMMIT強制を選択
- これにより無限ループを防止

## 関連ドキュメント

- tdd-review統合: `../tdd-review/SKILL.md`
- tdd-commit: `../tdd-commit/SKILL.md`
