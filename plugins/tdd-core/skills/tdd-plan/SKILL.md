---
name: tdd-plan
description: 実装計画を作成し、Test Listを定義する。INITの次フェーズ。「設計して」「計画して」で起動。
---

# TDD PLAN Phase

実装計画を作成し、Cycle docのPLANセクションを更新する。

## Progress Checklist

コピーして進捗を追跡:

```
PLAN Progress:
- [ ] Cycle doc確認（Environment含む）
- [ ] 最新ドキュメント確認（必要な場合のみ）
- [ ] ユーザーと実装計画を対話で作成
- [ ] PLANセクションを更新
- [ ] Test Listを作成
- [ ] REDフェーズへ誘導
```

## 禁止事項

- 実装コード作成（GREENで行う）
- テストコード作成（REDで行う）
- ユーザー承認なしの次フェーズ移行

## Workflow

### Step 1: Cycle doc確認

```bash
ls -t docs/cycles/*.md 2>/dev/null | head -1
```

Cycle docのEnvironmentセクションを確認し、バージョン情報を把握。

### Step 2: 最新ドキュメント確認（必要な場合）

**推奨**: 以下の場合にWebSearch/WebFetchで最新情報を確認:

- メジャーバージョンが最近リリースされた（例: Django 5.0）
- 破壊的変更が疑われる機能を使用
- AIの提案が古いAPIを使っている可能性がある場合

確認手順:
1. WebSearchで「[ライブラリ名] [バージョン] breaking changes」を検索
2. 必要に応じて公式ドキュメントをWebFetchで参照

**スキップ可**: 安定バージョンで既知の機能のみ使用する場合

### Step 3: 実装計画の対話

ユーザーに確認:
- アーキテクチャ（どのレイヤーに実装？）
- 依存関係（既存機能との連携は？）
- 品質基準（カバレッジ目標は？）

### Step 4: PLANセクション更新

Cycle docに背景・設計方針・ファイル構成を追記。

### Step 5: Test List作成

```markdown
## Test List

### TODO
- [ ] TC-01: [正常系テスト]
- [ ] TC-02: [異常系テスト]
```

### Step 6: 完了→RED誘導

```
================================================================================
PLAN完了
================================================================================
実装計画とTest Listを作成しました。
次: REDフェーズ（テスト作成）
================================================================================
```

## Reference

- 詳細: [reference.md](reference.md)
