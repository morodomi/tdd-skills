# tdd-plan Reference

SKILL.mdの詳細情報。必要時のみ参照。

## 実装計画の詳細

### アーキテクチャ確認

プロジェクトの構造を確認:
- Controller/Service/Repository パターン
- Clean Architecture
- MVC

### 品質基準

デフォルト:
- テストカバレッジ: 90%以上
- 静的解析: エラー0件

### Test List設計

**Given/When/Then形式**:

```
TC-01: ユーザーが有効な認証情報でログインできる
  Given: 有効なユーザーが存在する
  When: 正しい認証情報でログイン
  Then: ダッシュボードにリダイレクト
```

**テストカテゴリ**:
- 正常系: 期待通りの動作
- 異常系: エラーハンドリング
- 境界値: 限界値のテスト
- 権限: 認可のテスト

## Error Handling

### Cycle docが見つからない

```
⚠️ Cycle docが見つかりません。

tdd-init を先に実行してください。
```

### INITセクションが不完全

```
⚠️ INITセクションが不完全です。

Scope Definitionを確認してください。
```

## エラーメッセージ設計

異常系テストケース作成時に参照。ユーザーフレンドリーなエラーメッセージを設計する。

### 原則

1. **ポジティブフレーミング**: 否定形より肯定形で表現
2. **ユーザーを責めない**: システム視点で状況を説明
3. **次のアクションを提示**: 何をすべきか明示する
4. **技術用語を避ける**: ユーザー視点の言葉を使用

### パターン表

| 避ける | 推奨 |
|--------|------|
| 0件見つかりました | 該当するデータがありません |
| 入力が間違っています | 有効な形式で入力してください |
| 権限がありません | この操作には管理者権限が必要です |
| エラーが発生しました | 処理を完了できませんでした。再度お試しください |
| 無効な値です | 1以上の数値を入力してください |
| 失敗しました | 保存できませんでした。接続を確認してください |

### 適用例

```php
// Before
throw new Exception('Invalid email format');

// After
throw new ValidationException('有効なメールアドレスを入力してください');
```

```python
# Before
raise ValueError("File not found")

# After
raise FileNotFoundError("指定されたファイルが見つかりません。パスを確認してください。")
```
