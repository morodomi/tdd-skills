# tdd-review Reference

SKILL.mdの詳細情報。必要時のみ参照。

## 品質チェック詳細

### 静的解析レベル

**PHP (PHPStan)**:
- Level 0-4: 基本的なチェック
- Level 5-6: 中級
- Level 7-8: 厳格（推奨）

**Python (mypy)**:
- 通常モード: 基本的な型チェック
- strict モード: 厳格な型チェック（推奨）

### カバレッジ計測

**除外対象**:
- 設定ファイル
- マイグレーション
- シーダー

## quality-gate 詳細

4つのエージェントが並行実行:

| エージェント | チェック内容 |
|------------|------------|
| correctness-reviewer | 論理エラー、エッジケース、例外処理 |
| performance-reviewer | O記法、N+1問題、メモリ使用 |
| security-reviewer | 入力検証、認証・認可、SQLi/XSS |
| guidelines-reviewer | コーディング規約、命名規則 |

### 信頼スコア

各エージェントが0-100の信頼スコアを返す:

| スコア | 判定 | アクション |
|--------|------|-----------|
| 80-100 | BLOCK | GREENに戻って修正必須 |
| 50-79 | WARN | 警告確認後、COMMITへ |
| 0-49 | PASS | COMMITへ自動進行 |

## Error Handling

### 品質基準未達

```
品質基準を満たしていません。

対応:
1. 問題をDISCOVEREDに追加
2. REDフェーズに戻ってテスト作成
3. GREENフェーズで修正
4. 再度REVIEWを実行
```

### 静的解析エラー

```
静的解析でエラーが検出されました。

対応:
1. エラー内容を確認
2. 型ヒントの追加または修正
3. 再度解析を実行
```
