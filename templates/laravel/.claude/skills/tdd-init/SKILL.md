---
name: tdd-init
description: INITフェーズ用。新しい機能開発のTDDサイクルを開始する。docs/tddディレクトリの準備、機能概要の記録（オプション）、PLANフェーズへの誘導を行う。ユーザーが「init」「初期化」「新機能」と言った時、または /tdd-init コマンド実行時に使用。
allowed-tools: Read, Write, Grep, Glob, Bash
---

# TDD INIT Phase

あなたは現在 **INITフェーズ** にいます。

## このフェーズの目的

新しい機能開発の**TDDサイクルを開始**することです。
適切な準備を行い、PLANフェーズに進むための土台を作ります。

## このフェーズでやること

- [ ] TDDサイクルの開始を宣言する
- [ ] docs/tddディレクトリを準備する
- [ ] （オプション）機能概要をINIT.mdに記録する
- [ ] PLANフェーズへの移行を案内する

## このフェーズで絶対にやってはいけないこと

- 実装計画を詳細に作成すること（PLANフェーズで行う）
- テストコードを書くこと（REDフェーズで行う）
- 実装コードを書くこと（GREENフェーズで行う）
- 過剰な分析や設計（PLANフェーズで行う）

## ワークフロー

### 1. 準備フェーズ

まず、現在の状態を確認してください：

```bash
# プロジェクトがLaravelプロジェクトか確認
ls artisan 2>/dev/null && ls composer.json 2>/dev/null
```

または、Readツールで確認：
- artisanファイルを読み込めるか
- composer.jsonに"laravel/framework"が含まれているか

Laravelプロジェクトでない場合：
```
このSkillはLaravelプロジェクト用です。
現在のディレクトリがLaravelプロジェクトか確認してください。

確認方法:
- artisanファイルが存在するか（Read artisan）
- composer.jsonに"laravel/framework"があるか（Read composer.json）

Laravelプロジェクトのルートディレクトリに移動してから再度実行してください。
```

次に、既存のTDDサイクルが進行中でないか確認：

```bash
# PLAN.mdの存在確認
ls docs/tdd/PLAN.md 2>/dev/null
```

**PLAN.mdが存在する場合**：
```
⚠️ 既存のTDDサイクルが進行中の可能性があります。

docs/tdd/PLAN.mdが存在します。

選択肢:
1. 既存のTDDサイクルを継続する（INITは不要）
2. 既存のTDDサイクルを完了してから新しいサイクルを開始する
3. 既存のファイルをバックアップして新しいサイクルを開始する

どうしますか？
```

ユーザーが新しいサイクルを開始することを選択した場合のみ、次に進みます。

### 2. ディレクトリ準備フェーズ

docs/tddディレクトリを準備します：

```bash
# ディレクトリの存在確認
ls -d docs/tdd 2>/dev/null
```

**ディレクトリが存在しない場合**:

```bash
# ディレクトリ作成
mkdir -p docs/tdd

# .gitkeep作成（空ディレクトリをgit管理するため）
touch docs/tdd/.gitkeep
```

成功メッセージ:
```
✓ docs/tddディレクトリを作成しました。
```

**ディレクトリが既に存在する場合**:
```
✓ docs/tddディレクトリは既に存在します。
```

### 3. 機能概要記録フェーズ（オプション）

このフェーズは**オプション**です。機能概要を記録したい場合のみ実施します。

ユーザーに確認：
```
機能概要をINIT.mdに記録しますか？

- 記録する: 機能名や開始日時を記録します（推奨）
- スキップ: PLAN.mdで詳細に記録します

どちらにしますか？
```

**ユーザーが「記録する」を選択した場合**:

機能名を確認：
```
機能名を教えてください。

例:
- ユーザー認証機能
- 商品検索機能
- レポート出力機能
```

INIT.mdを作成：

Writeツールを使用してdocs/tdd/INIT.mdを作成します。

内容:
```markdown
# TDD INIT

**機能名**: [ユーザーが入力した機能名]
**開始日時**: [現在日時 YYYY-MM-DD HH:MM形式]
**ステータス**: 初期化完了

## 概要

[ユーザーが入力した簡単な概要、または空欄]

## 次のステップ

PLANフェーズで詳細な実装計画を作成してください。

---

*INITフェーズ完了*
```

成功メッセージ:
```
✓ docs/tdd/INIT.mdを作成しました。

機能名: [機能名]
開始日時: [現在日時]
```

**ユーザーが「スキップ」を選択した場合**:
```
✓ INIT.mdの作成をスキップしました。
  PLAN.mdで詳細な機能概要を記録してください。
```

### 4. 完了フェーズ

INITフェーズが完了したことを伝え、PLANフェーズへ誘導します：

```
================================================================================
INITフェーズが完了しました
================================================================================

TDDサイクルの準備が整いました。

現在のTDDワークフロー:
[完了] INIT (初期化) ← 現在ここ
[次] PLAN (計画)
[ ] RED (テスト作成)
[ ] GREEN (実装)
[ ] REFACTOR (リファクタリング)
[ ] REVIEW (品質検証)
[ ] COMMIT (コミット)

================================================================================
次のステップ: PLANフェーズ
================================================================================

PLANフェーズでは、以下を行います：

1. **実装計画の作成**
   - 機能の詳細な仕様
   - アーキテクチャ設計
   - ファイル構成

2. **受け入れ基準の定義**
   - Given/When/Then形式
   - すべてのシナリオを網羅

3. **品質基準の確認**
   - テストカバレッジ: 90%以上
   - PHPStan: Level 8
   - その他の品質基準

4. **テストケース設計**
   - 各受け入れ基準に対応するテスト
   - エッジケースの洗い出し

PLANフェーズを開始するには：
- 「plan」と言う
- または `/tdd-plan` コマンドを実行

================================================================================
```

## 制約の強制

このフェーズでは、`allowed-tools: Read, Write, Grep, Glob, Bash` が使用可能です。

**Read**: プロジェクトファイルの確認
**Write**: INIT.md作成、.gitkeep作成
**Grep**: ファイル検索
**Glob**: ファイルパターンマッチ
**Bash**: ディレクトリ作成、ファイル操作

もしユーザーが以下のような依頼をした場合は、**丁寧に拒否**してください：

- 「実装計画を作って」→ 「INITフェーズでは実装計画を作りません。PLANフェーズで詳細に作成します」
- 「テストを書いて」→ 「INITフェーズではテストを書きません。REDフェーズで作成します」
- 「実装して」→ 「INITフェーズでは実装しません。GREENフェーズで実装します」

## トラブルシューティング

### Laravelプロジェクトでない場合

```
エラー: このSkillはLaravelプロジェクト用です。

現在のディレクトリがLaravelプロジェクトか確認してください：
- artisanファイルが存在するか
- composer.jsonに"laravel/framework"があるか

Laravelプロジェクトのルートディレクトリに移動してから再度実行してください。
```

### 既存のTDDサイクルが進行中の場合

```
⚠️ 既存のTDDサイクルが進行中です。

以下のファイルが存在します:
- docs/tdd/PLAN.md

対応方法:
1. 既存のTDDサイクルを完了する（推奨）
2. 既存のファイルをバックアップする
   ```bash
   mv docs/tdd docs/tdd.backup.$(date +%Y%m%d_%H%M%S)
   ```
3. 既存のファイルを削除する（注意）
   ```bash
   rm -rf docs/tdd/*
   ```

どの方法を選択しますか？
```

### ディレクトリ作成に失敗した場合

```
エラー: docs/tddディレクトリの作成に失敗しました。

考えられる原因:
- 書き込み権限がない
- ディスク容量が不足している
- docsディレクトリが存在しない

対応方法:
1. 権限を確認
   ```bash
   ls -la docs/
   ```

2. 手動でディレクトリを作成
   ```bash
   mkdir -p docs/tdd
   ```

3. 権限を修正（必要に応じて）
   ```bash
   chmod 755 docs/
   ```
```

### 機能名が不明確な場合

```
機能名をより具体的に教えてください。

良い例:
- ユーザー認証機能
- 商品検索機能
- CSV出力機能

悪い例:
- 機能
- 新しいやつ
- あれ

具体的な機能名を入力してください：
```

## 参考情報

このSkillは、Laravel開発におけるTDDワークフローの**最初のフェーズ**です。

- 詳細なワークフロー: README.md参照
- プロジェクト設定: CLAUDE.md参照
- 次のフェーズ: tdd-plan Skill（計画）

### INITフェーズの重要性

INITフェーズは、TDDサイクルの**スタート地点**です：

- **準備**: 必要なディレクトリを用意
- **宣言**: 新しい機能開発の開始を明確化
- **記録**: 開始時点の情報を記録（オプション）
- **誘導**: PLANフェーズへスムーズに移行

「良いスタートが良い結果を生む」という原則に基づいています。

### INITフェーズのシンプルさ

INITフェーズは**意図的にシンプル**に設計されています：

- 詳細な分析や設計は行わない → PLANフェーズで実施
- テストは書かない → REDフェーズで実施
- 実装は行わない → GREENフェーズで実施

INITフェーズは「スタートを切る」だけです。
すぐにPLANフェーズに進んで、詳細な計画を立てましょう。

---

*このSkillはClaudeSkillsプロジェクトの一部です*
