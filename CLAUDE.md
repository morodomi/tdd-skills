# ClaudeSkills - TDD Framework for Claude Code

## Project Overview

**ClaudeSkills**は、Claude Codeを使った開発における厳格なTDD（Test-Driven Development）ワークフローを実現するためのSkills/MCPフレームワークです。

### Purpose

生成AIとの協働開発において、要望との乖離を防ぎ、厳格なTDDワークフローを強制することで、品質の高いコードを効率的に生成する。

### Target

- 個人開発者（将来的にチーム展開も視野）
- 複数フレームワーク対応（Laravel/Django/Flask/WordPress）
- 既存プロジェクト + 新規プロジェクトの両方

---

## Current Phase

**Phase: 要件定義・設計フェーズ**

現在、テンプレートリポジトリの設計と、最初のSkills実装の準備中。

---

## Documentation Index

プロジェクトの詳細なドキュメントは `docs/` ディレクトリに格納されています。
※ファイル命名規則: `YYYYMMDD_HHMM_作業内容.md`

### 要件定義・設計

| 作成日時 | ドキュメント | 内容 |
|---------|-------------|------|
| 2025-10-22 13:28 | [`20251022_1328_要件定義.md`](docs/20251022_1328_要件定義.md) | プロジェクト要件定義書 |

### 技術調査

| 作成日時 | ドキュメント | 内容 |
|---------|-------------|------|
| 2025-10-22 14:43 | [`20251022_1443_SkillsMCP調査.md`](docs/20251022_1443_SkillsMCP調査.md) | Claude Skills/MCP調査結果 |
| 2025-10-22 16:09 | [`20251022_1609_TDDとSpec駆動比較.md`](docs/20251022_1609_TDDとSpec駆動比較.md) | TDD vs Spec駆動開発の比較 |
| 2025-10-23 11:24 | [`20251023_1124_インストール戦略比較.md`](docs/20251023_1124_インストール戦略比較.md) | インストール戦略の比較 |

### 実装（未着手）

プロジェクト構造の詳細は [`README.md`](README.md) を参照してください。

---

## Key Decisions

### 開発方針

1. **TDDワークフロー継続**
   - 現在のワークフロー（INIT → PLAN → RED → GREEN → REFACTOR → REVIEW → COMMIT）を維持
   - BDDツール（Behat/PHPSpec）は導入しない
   - Spec駆動のマインドセット（Given/When/Then）は部分的に取り入れる

2. **インストール戦略**
   - **プロジェクト固有インストール** (`.claude/skills/`) を採用
   - グローバルインストール (`~/.claude/skills/`) は使わない
   - テンプレートリポジトリ + `install.sh` で配布

3. **アーキテクチャ**
   ```
   Claude Skills (ワークフロー制御・制約)
     +
   スラッシュコマンド (ユーザー操作)
     +
   MCP (外部ツール統合) ← 将来的に
     +
   CLAUDE.md (プロジェクト設定)
   ```

4. **フレームワーク対応**
   - Laravel: PHPUnit/Pest, PHPStan, Laravel Pint
   - Django: pytest, mypy, black
   - Flask: pytest, mypy, black
   - WordPress: PHPUnit, WordPress Coding Standards

---

## TDD Workflow (Target)

```
INIT (初期化)
  ↓
PLAN (計画・docs作成)
  ↓
PLAN REVIEW (計画レビュー)
  ↓
RED (テスト作成)
  ↓
GREEN (実装)
  ↓
REFACTOR (リファクタリング)
  ↓
REVIEW (品質検証)
  ↓
DOC (ドキュメント更新)
  ↓
COMMIT
```

各フェーズでClaude Skillsが制約を強制:
- `PLAN`: 実装コードを書かない（`allowed-tools: Read, Grep, Glob`）
- `RED`: テストコードのみ書く
- `GREEN`: 最小限の実装のみ
- `REFACTOR`: テストを維持しながらリファクタ

---

## Development Guidelines

### このプロジェクト自体の開発

このプロジェクト（ClaudeSkills）の開発も、将来的にTDDワークフローで進める予定。

現在は**調査・設計フェーズ**のため、以下のルール:

1. **ドキュメントファースト**
   - 実装前に設計ドキュメントを作成
   - 調査結果を必ずドキュメント化

2. **段階的な実装**
   - 小さく始める（tdd-plan Skill 1つから）
   - 動作確認してから拡大

3. **プロジェクト構造の維持**
   - ドキュメントは `docs/` 配下
   - テンプレートは `templates/` 配布
   - サンプルは `examples/` 配下

### ドキュメント作成ルール

要件定義や実装計画をまとめる際の基本方針:

1. **論点の洗い出しを優先**
   - ドキュメント作成前に論点を明確化
   - 不明点はユーザーに確認してから整理
   - 推測での記述を避ける

2. **ファイル命名規則**
   - 設計文書: `docs/YYYYMMDD_HHMM_作業内容.md`
   - 例: `docs/20251022_1430_Laravel用Skills設計.md`
   - タイムスタンプで時系列を追跡可能に

3. **バージョン管理**
   - 既存資料に大きな変更を加える場合は新しいファイルとして作成
   - 更新履歴をたどれるように保持
   - 元ファイルは削除せず残す

4. **Markdownフォーマット**
   - 見出し構造を明確に（h2, h3を適切に使用）
   - コードブロックには言語指定
   - 表形式で比較・一覧を整理

5. **絵文字の使用禁止**
   - ドキュメント内で絵文字を使用しない
   - 状態表示は記号（✅ ❌ ⏸️）ではなくテキスト（完了、未完了、保留）で表現
   - 見出しやリストに装飾的な絵文字を使用しない

---

## Tech Stack

### このプロジェクト

- **配布形式**: Bash scripts, Markdown (Claude Skills)
- **対象言語**: PHP, Python
- **対象フレームワーク**: Laravel, Django, Flask, WordPress
- **ツール統合**: PHPStan, PHPUnit/Pest, pytest, mypy, etc.

### Claude Code統合

- **Claude Skills**: ワークフロー制御、フェーズごとの制約
- **Slash Commands**: ユーザー操作のエントリーポイント
- **MCP (将来)**: PHPStan, PHPUnit等の外部ツール統合
- **CLAUDE.md**: プロジェクト固有の設定

---

## Commit & Pull Request Guidelines

### コミットメッセージ規則

**フォーマット**: 短い命令形主体（日本語可）

```
# 良い例
feat: tdd-plan Skillを追加
fix: install.shのパス解決を修正
docs: インストール手順を更新
refactor: Skills構造を整理

# 課題連携
feat(#123): Laravel用テンプレートを追加
fix(#456): CLAUDE.mdのタイポを修正
```

**プレフィックス**:
- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメントのみの変更
- `refactor`: リファクタリング
- `test`: テスト追加・修正
- `chore`: ビルド、補助ツール等の変更

**課題連携**: `(#id)` を付与して課題番号を参照

### Pull Request作成ガイドライン

**PR説明に含めるべき内容**:

1. **スコープ概要**
   - 何を変更したか（簡潔に）
   - なぜ変更したか（背景・理由）

2. **実行テスト記録**
   ```bash
   # 実施したテスト例
   ./templates/laravel/install.sh
   # → 正常にインストール完了

   # 動作確認
   cat .claude/skills/tdd-plan/SKILL.md
   # → 期待通りの内容
   ```

3. **変更の影響範囲**
   - スキーマ変更: なし
   - 環境変数変更: なし
   - 依存関係追加: なし

4. **スクリーンショット（該当する場合）**
   - ドキュメント変更時: 変更前後の比較
   - テンプレート追加時: ディレクトリ構造のスクリーンショット

### レビュープロセス

1. **Draft PR作成**
   - WIP（作業中）の段階でDraft PRを作成
   - 大きな方向性を早期に確認

2. **フィードバック対応**
   - レビューコメントへの対応状況を追跡コメントで共有
   - 修正内容を簡潔に説明

3. **Ready for Review**
   - すべてのフィードバックに対応後、Ready for Reviewに切り替え
   - 自己レビューを実施してからマージ可能状態に

### 特記事項の明示

**以下の変更がある場合は本文で明示**:

- **スキーマ変更**: データベース構造の変更（このプロジェクトでは該当しない見込み）
- **シード変更**: 初期データの変更
- **環境変数変更**: `.env` に新しい変数を追加した場合
- **依存関係変更**: 新しいツール・ライブラリを追加した場合
- **破壊的変更**: 既存のインストール済みプロジェクトに影響がある場合

---

## Next Steps

### Immediate (次の作業)

1. **プロジェクト構造の確立**
   ```bash
   mkdir -p templates/laravel/.claude/skills
   mkdir -p templates/laravel/.claude/commands
   ```

2. **最初のSkill作成**
   - `templates/laravel/.claude/skills/tdd-plan/SKILL.md`
   - 「実装コードを書かない」制約をテスト

3. **install.sh作成**
   - テンプレートを既存プロジェクトにコピーするスクリプト

### Short-term (1-2週間)

4. 全フェーズのSkills作成（tdd-init, tdd-red, tdd-green, etc.）
5. スラッシュコマンド作成
6. 既存Laravelプロジェクトでテスト

### Mid-term (1ヶ月)

7. MCP統合（PHPStan, PHPUnit）
8. 他フレームワーク対応（Django, Flask, WordPress）
9. ドキュメント整備（README, チュートリアル）

### Long-term

10. 公開リポジトリ化
11. コミュニティフィードバック収集
12. 継続的な改善

---

## Notes for Claude Code

### プロジェクトの性質

このプロジェクトは**メタプロジェクト**です:
- Claude Codeの振る舞いを制御するためのツールを開発している
- したがって、このプロジェクト自体の開発では**まだSkillsを使っていない**
- 将来的にはこのプロジェクト自体もTDD Skillsで開発する予定

### 現在のフェーズでの注意点

1. **調査・設計フェーズ**
   - ドキュメント作成が主な作業
   - 実装は小さく段階的に

2. **ユーザーの意図**
   - ユーザーは検討・熟考を重視している
   - 実装を急がず、設計を固めることを優先

3. **ドキュメント管理**
   - すべての調査・決定事項をドキュメント化
   - このCLAUDE.mdを常に最新に保つ

### メタルール & 重要ガイドライン

**Claude Codeへの明示的な指示**:

1. **不確実性への対処**
   - コードの動作、ファイル場所、システム状態について不確実な場合は**推測せず、ユーザーに明確化を求める**
   - 「おそらく〜」「〜だと思います」などの曖昧な表現を避ける

2. **変更の主張**
   - コード変更が効果を持つと主張しない（実際の変更を確認できない限り）
   - 実際に変更したファイルと内容を明示的に報告

3. **ファイル作成の制限**
   - **求められたことを実行し、それ以上でもそれ以下でもない**
   - 絶対に必要でない限り、新規ファイルを作成しない
   - **既存ファイルの編集を新規作成より優先する**
   - ユーザーが明示的に要求しない限り、ドキュメントファイル（*.md）やREADMEファイルを積極的に作成しない

4. **絵文字の使用**
   - ユーザーが明示的に要求した場合のみ使用
   - 通常のコミュニケーションでは絵文字を避ける

5. **確立されたパターンへの準拠**
   - 既存のコードベース規約に合わせる
   - 新しいパターンを導入する前にユーザーに確認

6. **変更時のドキュメント更新**
   - 重要な決定事項や変更があった場合、このCLAUDE.mdを更新
   - コメントやドキュメントを最新に保つ

### 開発時の重要原則

1. **段階的アプローチ**
   - 小さく始めて、動作確認してから拡大
   - 一度に多くの機能を実装しない

2. **テスト駆動（将来）**
   - 実装フェーズに入ったら、テストファーストを徹底
   - 全テストが通過してからコミット

3. **設計優先**
   - 現在のフェーズでは実装よりも設計・調査を優先
   - ユーザーの承認を得てから次のステップへ進む

---

## References

- [anthropics/skills](https://github.com/anthropics/skills) - 公式Skillsリポジトリ
- [Claude Code Documentation](https://docs.claude.com/en/docs/claude-code)
- [Model Context Protocol](https://modelcontextprotocol.io/)

---

*最終更新: 2025-10-23*
*現在のフェーズ: 要件定義・設計*
