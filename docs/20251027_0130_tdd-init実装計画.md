# Laravel用tdd-init Skill 実装計画

**作成日時**: 2025-10-27 01:30
**対象**: templates/laravel/.claude/skills/tdd-init/

---

## ユーザーストーリー

**As a** Laravel開発者
**I want to** 新しい機能開発のTDDサイクルを開始したい
**So that** 適切な準備をしてPLANフェーズに進むことができる

---

## 受け入れ基準

### シナリオ1: tdd-init Skillが正しく発動する

**Given** ユーザーがLaravelプロジェクトで作業している
**When** 以下のいずれかの条件を満たす
  - ユーザーが「init」「初期化」「新機能」と言う
  - `/tdd-init` コマンドを実行する
  - `/tdd-init "機能名"` のように機能名を指定する
**Then** tdd-init Skillが自動的に読み込まれる
**And** TDDサイクルの開始準備を行う

### シナリオ2: docs/tddディレクトリを準備する

**Given** tdd-init Skillが発動している
**When** docs/tddディレクトリが存在しない場合
**Then** docs/tddディレクトリを作成する
**And** .gitkeepファイルを配置する（空ディレクトリをgit管理）

### シナリオ3: 機能概要を記録する（オプション）

**Given** tdd-init Skillが発動している
**And** ユーザーが機能名を指定している
**When** 機能概要の記録を選択する
**Then** docs/tdd/INIT.mdに機能概要を記録する
**And** 開始日時を記録する

### シナリオ4: PLANフェーズへ誘導する

**Given** tdd-init Skillが発動している
**When** 初期化が完了する
**Then** 現在のTDDワークフローを表示する
**And** 次のステップ（PLANフェーズ）を案内する
**And** PLANフェーズで何をするか説明する

---

## 実装範囲

### 対象ファイル

新規作成:
- `templates/laravel/.claude/skills/tdd-init/SKILL.md` - tdd-init Skillの定義

### 対象外

- INIT.mdのテンプレート作成（シンプルに記録のみ）
- 複雑な機能分析や要件定義（PLANフェーズで実施）
- 他のSkills

---

## アーキテクチャ設計

### ファイル構成

```
templates/laravel/.claude/skills/tdd-init/
└── SKILL.md                      # Skill定義
```

### SKILL.mdの構造

```yaml
---
name: tdd-init
description: INITフェーズ用。新しい機能開発のTDDサイクルを開始する。docs/tddディレクトリの準備、機能概要の記録（オプション）、PLANフェーズへの誘導を行う。ユーザーが「init」「初期化」「新機能」と言った時、または /tdd-init コマンド実行時に使用。
allowed-tools: Read, Write, Grep, Glob, Bash
---

# TDD INIT Phase

[Skillの詳細内容]
```

### Skillの振る舞い

1. **発動時**
   - TDDサイクルの開始を宣言
   - プロジェクトがLaravelプロジェクトか確認

2. **ディレクトリ準備フェーズ**
   - docs/tddディレクトリの存在確認
   - 存在しない場合は作成
   - .gitkeepファイルを配置

3. **機能概要記録フェーズ（オプション）**
   - ユーザーが機能名を指定している場合
   - docs/tdd/INIT.mdに記録
   - 開始日時、機能名、簡単な概要を記録

4. **PLANフェーズ誘導フェーズ**
   - 現在のTDDワークフローを表示
   - PLANフェーズで何をするか説明
   - `/tdd-plan` または「plan」と言うよう案内

---

## テストケース一覧

このプロジェクトはSkillsの実装なので、テストは手動確認になります。

### 手動テストケース

1. **Skill発動テスト**
   - 条件: Laravelプロジェクトで「init」と発言
   - 期待: tdd-init Skillが読み込まれる

2. **ディレクトリ作成テスト**
   - 条件: docs/tddディレクトリが存在しない
   - 期待: docs/tddディレクトリが作成される
   - 期待: .gitkeepファイルが配置される

3. **ディレクトリ存在時テスト**
   - 条件: docs/tddディレクトリが既に存在する
   - 期待: エラーにならない
   - 期待: 既存のファイルを上書きしない

4. **機能名指定テスト**
   - 条件: `/tdd-init "ユーザー認証機能"`のように指定
   - 期待: 機能名が認識される
   - 期待: INIT.mdに記録される（オプション）

5. **機能概要記録テスト**
   - 条件: INIT.md記録を選択
   - 期待: docs/tdd/INIT.mdが作成される
   - 期待: 機能名、開始日時が記録される

6. **PLANフェーズ誘導テスト**
   - 条件: 初期化完了
   - 期待: TDDワークフローが表示される
   - 期待: PLANフェーズへの案内がある

7. **既存TDDサイクル警告テスト**
   - 条件: docs/tdd/PLAN.mdが既に存在する
   - 期待: 警告が表示される
   - 期待: 上書きするか確認される

---

## 見積もり

- SKILL.md作成: 30分
- 動作確認（手動テスト）: 20分
- ドキュメント更新: 10分

**合計**: 約1時間

---

## 依存関係

### 前提条件
- Laravelプロジェクト内で実行
- .claude/skills/ディレクトリが存在

### 今後の依存
- PLANフェーズで、このINITフェーズの情報を参照する可能性
- INIT.mdはオプションなので、なくても問題ない

---

## リスク

### リスク1: docs/tddディレクトリが既に存在し、ファイルがある

**発生条件**: 前回のTDDサイクルが完了していない
**対策**: 警告を表示し、ユーザーに確認を求める。上書きはしない。

### リスク2: 機能名が不明確

**発生条件**: ユーザーが機能名を指定していない
**対策**: 機能名は必須ではない。PLANフェーズで詳細化すれば良い。

### リスク3: INIT.mdの利用価値が低い

**発生条件**: INIT.mdを作っても使わない
**対策**: INIT.mdはオプション。記録しなくても良い。重要な情報はPLAN.mdに記録する。

---

## 実装の簡潔化

tdd-initは、他のSkillsと比べて**非常にシンプル**にします：

1. **主な役割**: TDDサイクルの開始宣言とPLANフェーズへの誘導
2. **最小限の機能**: ディレクトリ準備のみ
3. **オプション機能**: INIT.mdへの記録（あってもなくても良い）

**重要な原則**:
- 複雑な要件定義や分析はPLANフェーズで行う
- INITフェーズは「スタート地点」としてシンプルに保つ
- ユーザーの負担を最小限にする

---

## 次のステップ

1. [完了] INIT（要件定義）← 現在ここ
2. [次] PLAN作成（このドキュメント完成後）
3. [未] PLAN REVIEW（ユーザー承認）
4. [未] RED（手動テストケース作成）
5. [未] GREEN（SKILL.md実装）
6. [未] REFACTOR（内容の洗練）
7. [未] REVIEW（動作確認）
8. [未] DOC（README更新）
9. [未] COMMIT

---

*作成日時: 2025-10-27 01:30*
*次のフェーズ: PLAN（実装計画の詳細化完了）*
