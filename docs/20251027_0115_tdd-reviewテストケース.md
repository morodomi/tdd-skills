# Laravel用tdd-review Skill テストケース

**作成日時**: 2025-10-27 01:15
**対象**: templates/laravel/.claude/skills/tdd-review/
**テストタイプ**: 手動テスト

---

## テスト環境

- **Claude Code**: 最新版
- **テスト対象プロジェクト**: 既存のLaravelプロジェクト
- **前提条件**:
  - tdd-review Skillがインストール済み
  - `.claude/skills/tdd-review/SKILL.md` が存在
  - REFACTORフェーズが完了している
  - PLAN.mdが存在する

---

## テストケース一覧

### TC-01: Skill発動テスト（キーワード）

**目的**: ユーザーが「review」と発言した際にtdd-review Skillが正しく発動することを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる
- Claude Codeが起動している
- REFACTORフェーズが完了している

**実施手順**:
1. Claude Codeで新しいセッションを開始
2. 「review」とメッセージを送信
3. Skillの読み込みログを確認

**期待結果**:
- tdd-review Skillが自動的に読み込まれる
- Claude Codeが「REVIEWフェーズを開始します」等のメッセージを返す
- 「最終的な品質検証を行います」等の説明がある
- PLAN.mdを読み込む動作が見られる

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-02: PLAN.md読み込みテスト

**目的**: SkillがPLAN.mdを読み込み、要件と品質基準を抽出することを確認

**前提条件**:
- tdd-review Skillが発動している
- `docs/tdd/PLAN.md` が存在

**実施手順**:
1. Skillが発動したら、PLAN.mdの読み込み動作を確認
2. 要件と品質基準が表示されるか確認

**期待結果**:
- PLAN.mdが正しく読み込まれる
- 実装範囲が抽出される
- 受け入れ基準が抽出される
- 品質基準が抽出される（テストカバレッジ、PHPStan等）

**実際の結果**:
[実施時に記録]

**抽出された情報**:
- 実装範囲: [記録]
- 品質基準: [記録]

**判定**: [合格/不合格]

---

### TC-03: テスト実行テスト

**目的**: Skillがすべてのテストを実行することを確認

**前提条件**:
- tdd-review Skillが発動している

**実施手順**:
1. REVIEWフェーズ開始後のテスト実行を観察

**期待結果**:
- `php artisan test` が実行される
- すべてのテストが通っている
- テスト結果が表示される

**実際の結果**:
[実施時に記録]

**テスト結果**:
- 合格数: [記録]
- 失敗数: [記録]

**判定**: [合格/不合格]

---

### TC-04: テスト失敗時の中断テスト

**目的**: テストが失敗している場合、REVIEWフェーズを中断することを確認

**前提条件**:
- tdd-review Skillが発動している
- 一部のテストが失敗している

**実施手順**:
1. テストが失敗している状態でREVIEWを開始
2. Skillの応答を確認

**期待結果**:
- テスト失敗が検出される
- REVIEWフェーズが中断される
- REFACTORフェーズに戻るよう促される
- 失敗したテストの情報が表示される

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-05: PHPStanチェックテスト

**目的**: PHPStanが実行され、品質基準を満たしているか確認することを確認

**前提条件**:
- tdd-review Skillが発動している
- すべてのテストが通っている

**実施手順**:
1. テスト通過後のPHPStan実行を観察

**期待結果**:
- `vendor/bin/phpstan analyse` が実行される
- Level 8で実行される
- エラー件数が表示される
- 品質基準（エラー0件）と照合される

**実際の結果**:
[実施時に記録]

**PHPStan結果**:
- Level: [記録]
- エラー件数: [記録]

**判定**: [合格/不合格]

---

### TC-06: テストカバレッジチェックテスト

**目的**: テストカバレッジが確認され、品質基準を満たしているか確認することを確認

**前提条件**:
- tdd-review Skillが発動している
- すべてのテストが通っている

**実施手順**:
1. PHPStan実行後のカバレッジ確認を観察

**期待結果**:
- `php artisan test --coverage` が実行される
- カバレッジ率が表示される
- 品質基準（90%以上）と照合される

**実際の結果**:
[実施時に記録]

**カバレッジ結果**:
- カバレッジ率: [記録]

**判定**: [合格/不合格]

---

### TC-07: 品質基準不合格時の警告テスト

**目的**: 品質基準を満たしていない場合、適切に警告することを確認

**前提条件**:
- tdd-review Skillが発動している
- 品質基準の一部を満たしていない（例: カバレッジ80%）

**実施手順**:
1. 品質基準を満たさない状態でREVIEWを実行
2. 警告メッセージを確認

**期待結果**:
- 品質基準を満たしていないことが警告される
- 具体的な不合格内容が表示される（例: カバレッジ80%、目標90%）
- 改善方法が提示される

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-08: 要件確認テスト

**目的**: PLAN.mdの実装範囲と実際の実装を照合することを確認

**前提条件**:
- tdd-review Skillが発動している
- 品質チェックが完了している

**実施手順**:
1. 要件確認フェーズの動作を観察
2. PLAN.mdとの照合内容を確認

**期待結果**:
- PLAN.mdの「実装範囲」セクションが参照される
- 実装ファイル一覧が表示される
- 対象ファイルが実装されているか確認される

**実際の結果**:
[実施時に記録]

**確認内容**:
[記録]

**判定**: [合格/不合格]

---

### TC-09: 対象外機能チェックテスト

**目的**: PLAN.mdの「対象外」に記載された機能が実装されていないことを確認

**前提条件**:
- tdd-review Skillが発動している
- PLAN.mdに「対象外」セクションがある

**実施手順**:
1. 対象外チェックの動作を観察

**期待結果**:
- PLAN.mdの「対象外」セクションが参照される
- 対象外の機能が実装されていないか確認される
- 実装されている場合は警告が表示される

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-10: レビューレポート表示テスト

**目的**: すべてのチェック完了後、総合的なレビューレポートが表示されることを確認

**前提条件**:
- tdd-review Skillが発動している
- すべてのチェックが完了している

**実施手順**:
1. 完了メッセージを確認
2. レビューレポートの内容を確認

**期待結果**:
- レビューレポートが表示される
- 以下の情報が含まれる:
  - テスト結果（合格/失敗）
  - PHPStan結果（Level, エラー件数）
  - テストカバレッジ（%）
  - 要件確認結果
  - 総合判定（合格/不合格）

**実際の結果**:
[実施時に記録]

**レビューレポート内容**:
[記録]

**判定**: [合格/不合格]

---

### TC-11: 次ステップ案内テスト

**目的**: REVIEWフェーズ完了後、適切に次のステップを案内することを確認

**前提条件**:
- tdd-review Skillが発動している
- REVIEWが完了している

**実施手順**:
1. 完了メッセージで次のステップ案内を確認

**期待結果**:
- 次のフェーズ（DOC/COMMIT）について明示される
- TDDワークフローの現在位置が表示される
- COMMITに進む前にPLAN.mdを更新するよう促される

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-12: Read-only動作テスト

**目的**: REVIEWフェーズで実装コードが変更されないことを確認

**前提条件**:
- tdd-review Skillが発動している

**実施手順**:
1. REVIEW実行中のファイル操作を観察
2. Writeツールが使用されていないか確認

**期待結果**:
- Read, Grep, Glob, Bashツールのみ使用される
- Write, Editツールは使用されない
- 実装コードが変更されない

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

## テスト実施記録

**実施日**: [未実施]
**実施者**: [名前]
**使用環境**:
- Claude Code バージョン:
- Laravelプロジェクト:
- PHPバージョン:
- PHPStanバージョン:

### 総合結果

| テストケース | 判定 | 備考 |
|------------|------|------|
| TC-01: Skill発動（キーワード） | [未実施] | |
| TC-02: PLAN.md読み込み | [未実施] | |
| TC-03: テスト実行 | [未実施] | |
| TC-04: テスト失敗時の中断 | [未実施] | |
| TC-05: PHPStanチェック | [未実施] | |
| TC-06: テストカバレッジチェック | [未実施] | |
| TC-07: 品質基準不合格時の警告 | [未実施] | |
| TC-08: 要件確認 | [未実施] | |
| TC-09: 対象外機能チェック | [未実施] | |
| TC-10: レビューレポート表示 | [未実施] | |
| TC-11: 次ステップ案内 | [未実施] | |
| TC-12: Read-only動作 | [未実施] | |

**合格数**: 0/12
**不合格数**: 0/12
**未実施**: 12/12

**総合判定**: [未実施]

---

## 不具合記録

### 不具合-01: [タイトル]
**発生テストケース**:
**症状**:
**再現手順**:
**期待される動作**:
**実際の動作**:
**対応**:

---

## 備考

- テストは実装完了後（GREENフェーズ後）に実施する
- すべてのテストが合格するまでREFACTORフェーズに進まない
- 不合格の場合は実装を修正してテストを再実施
- 特にTC-04（テスト失敗時の中断）とTC-12（Read-only動作）は重要

---

*作成日時: 2025-10-27 01:15*
*次のフェーズ: GREEN（実装）*
