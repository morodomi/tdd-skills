# Laravel用tdd-red Skill テストケース

**作成日時**: 2025-10-24 17:00
**対象**: templates/laravel/.claude/skills/tdd-red/
**テストタイプ**: 手動テスト

---

## テスト環境

- **Claude Code**: 最新版
- **テスト対象プロジェクト**: 既存のLaravelプロジェクト
- **前提条件**:
  - tdd-red Skillがインストール済み
  - `.claude/skills/tdd-red/SKILL.md` が存在
  - `docs/tdd/PLAN.md` が存在（tdd-planで作成済み）
  - PLAN.mdにテストケース一覧が記載されている

---

## テストケース一覧

### TC-01: Skill発動テスト（キーワード）

**目的**: ユーザーが「red」と発言した際にtdd-red Skillが正しく発動することを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる
- Claude Codeが起動している
- PLAN.mdが存在する

**実施手順**:
1. Claude Codeで新しいセッションを開始
2. 「red」とメッセージを送信
3. Skillの読み込みログを確認

**期待結果**:
- tdd-red Skillが自動的に読み込まれる
- Claude Codeが「REDフェーズを開始します」等のメッセージを返す
- 「テストコードのみを作成します」等の制約説明がある
- PLAN.mdを読み込む動作が見られる

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-02: 発動キーワードバリエーションテスト

**目的**: 複数のキーワードでSkillが発動することを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる
- Claude Codeが起動している
- PLAN.mdが存在する

**実施手順**:
1. 新しいセッションで「テスト」と発言 → Skill発動確認
2. 新しいセッションで「テスト作成」と発言 → Skill発動確認
3. 新しいセッションで「red」と発言 → Skill発動確認

**期待結果**:
- すべてのキーワードでtdd-red Skillが発動する
- 発動の挙動が一貫している

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-03: PLANフェーズ完了後の自動発動テスト

**目的**: PLANフェーズ完了後、自然にREDフェーズに移行できることを確認

**前提条件**:
- tdd-plan Skillが発動している
- PLAN.mdが生成されたばかり

**実施手順**:
1. tdd-plan SkillでPLAN.mdを作成
2. PLAN REVIEWを完了
3. 「次のフェーズに進んで」等と発言
4. tdd-red Skillが発動するか確認

**期待結果**:
- PLANフェーズ完了後、tdd-red Skillが自動的に発動
- または、REDフェーズへの移行を促すメッセージが表示される

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-04: PLAN.md読み込みテスト

**目的**: SkillがPLAN.mdを読み込み、テストケース一覧を抽出できることを確認

**前提条件**:
- tdd-red Skillが発動している
- `docs/tdd/PLAN.md` が存在
- PLAN.mdに「## テストケース一覧」セクションがある

**実施手順**:
1. Skillが発動したら、PLAN.mdの読み込み動作を確認
2. テストケース一覧が表示されるか確認
3. Feature TestsとUnit Testsが区別されているか確認

**期待結果**:
- PLAN.mdが正しく読み込まれる
- テストケース一覧セクションが抽出される
- Feature TestsとUnit Testsが分けて表示される
- 各テストケースの概要が表示される

**実際の結果**:
[実施時に記録]

**テストケース抽出内容**:
- Feature Tests: [記録]
- Unit Tests: [記録]

**判定**: [合格/不合格]

---

### TC-05: Feature Test作成テスト

**目的**: Feature Testが正しい形式で作成されることを確認

**前提条件**:
- tdd-red Skillが発動している
- PLAN.mdにFeature Testのテストケースが記載されている

**実施手順**:
1. Skillに「Feature Testを作成して」と依頼
2. 作成されたファイルパスを確認
3. ファイル内容を確認

**期待結果**:
- `tests/Feature/XXXTest.php` が作成される
- ファイルが以下の要素を含む:
  - [ ] `<?php` 開始タグ
  - [ ] 正しいnamespace (`Tests\Feature`)
  - [ ] `use PHPUnit\Framework\Attributes\Test;` インポート
  - [ ] `use Tests\TestCase;` インポート
  - [ ] クラスが `TestCase` を継承
  - [ ] `#[Test]` 属性付きメソッド
  - [ ] `snake_case` メソッド名（test_プレフィックスなし）
  - [ ] `: void` 戻り値型
  - [ ] Given/When/Then/Andコメント

**実際の結果**:
[実施時に記録]

**作成されたファイルパス**:

**判定**: [合格/不合格]

---

### TC-06: Unit Test作成テスト

**目的**: Unit Testが正しい形式で作成されることを確認

**前提条件**:
- tdd-red Skillが発動している
- PLAN.mdにUnit Testのテストケースが記載されている

**実施手順**:
1. Skillに「Unit Testを作成して」と依頼
2. 作成されたファイルパスを確認
3. ファイル内容を確認

**期待結果**:
- `tests/Unit/XXXTest.php` が作成される
- Feature Testと同様の形式要素を含む
- namespace は `Tests\Unit`

**実際の結果**:
[実施時に記録]

**作成されたファイルパス**:

**判定**: [合格/不合格]

---

### TC-07: #[Test]属性形式検証テスト

**目的**: 作成されたテストが確実に#[Test]属性形式を使用していることを確認

**前提条件**:
- TC-05またはTC-06が合格
- テストファイルが作成されている

**実施手順**:
1. 作成されたテストファイルを開く
2. 以下の要素が存在することを確認

**期待結果**:

**必須要素**:
- [ ] `use PHPUnit\Framework\Attributes\Test;` がインポートされている
- [ ] `#[Test]` 属性が各テストメソッドに付与されている
- [ ] メソッド名が `snake_case` 形式
- [ ] メソッド名に `test_` プレフィックスがない
- [ ] 戻り値の型が `: void` で明示されている
- [ ] Given/When/Then/Andコメントが含まれている

**禁止要素（含まれていないこと）**:
- [ ] `/** @test */` アノテーションが使われていない
- [ ] `test_` プレフィックス付きメソッド名が使われていない
- [ ] Pest形式（`it()`, `test()`）が使われていない

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-08: 制約テスト（実装コードを書かない）

**目的**: REDフェーズ中に実装を依頼しても、Skillが拒否することを確認

**前提条件**:
- tdd-red Skillが発動している
- テスト作成中

**実施手順**:
1. RED作成中に「ProfileControllerのupdate()メソッドを実装して」と依頼
2. Skillの応答を確認

**期待結果**:
- 「REDフェーズでは実装コードを書けません」等の拒否メッセージ
- 実装コードが生成されない
- テスト作成に集中するよう促される
- 「GREENフェーズで実装します」等の案内がある

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-09: テスト実行案内テスト

**目的**: すべてのテスト作成完了後、テスト実行を促すことを確認

**前提条件**:
- tdd-red Skillが発動している
- すべてのテストが作成済み

**実施手順**:
1. すべてのテスト作成完了後のメッセージを確認

**期待結果**:
- テスト実行コマンドが提示される（例: `php artisan test`）
- すべてのテストが失敗することを確認するよう促される
- 失敗理由（実装がないため）が説明される
- 次のフェーズ（GREEN）について案内がある

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-10: テストファイル一覧表示テスト

**目的**: 完了フェーズで作成したテストファイル一覧が表示されることを確認

**前提条件**:
- tdd-red Skillが発動している
- すべてのテストが作成済み

**実施手順**:
1. 完了メッセージを確認
2. 作成したテストファイル一覧が表示されるか確認

**期待結果**:
- 作成したテストファイルパスが一覧表示される
- Feature TestsとUnit Testsが区別されている
- 各ファイルのテストケース概要が表示される

**実際の結果**:
[実施時に記録]

**表示されたファイル一覧**:
- Feature Tests: [記録]
- Unit Tests: [記録]

**判定**: [合格/不合格]

---

### TC-11: 次フェーズ案内テスト

**目的**: REDフェーズ完了後、GREENフェーズへの移行を適切に案内することを確認

**前提条件**:
- tdd-red Skillが発動している
- すべてのテストが作成済み

**実施手順**:
1. 完了メッセージで次のステップ案内を確認

**期待結果**:
- 次のフェーズ（GREEN）について明示される
- GREENフェーズで何をするか（実装）が説明される
- テストを通すことが目標であることが説明される
- TDDワークフローの現在位置が表示される

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

## テスト実施記録

**実施日**: [未実施]
**実施者**: [名前]
**使用環境**:
- Claude Code バージョン:
- Laravelプロジェクト:
- PHPUnitバージョン:

### 総合結果

| テストケース | 判定 | 備考 |
|------------|------|------|
| TC-01: Skill発動（キーワード） | [未実施] | |
| TC-02: 発動キーワードバリエーション | [未実施] | |
| TC-03: PLANフェーズ完了後の自動発動 | [未実施] | |
| TC-04: PLAN.md読み込み | [未実施] | |
| TC-05: Feature Test作成 | [未実施] | |
| TC-06: Unit Test作成 | [未実施] | |
| TC-07: #[Test]属性形式検証 | [未実施] | |
| TC-08: 制約テスト | [未実施] | |
| TC-09: テスト実行案内 | [未実施] | |
| TC-10: テストファイル一覧表示 | [未実施] | |
| TC-11: 次フェーズ案内 | [未実施] | |

**合格数**: 0/11
**不合格数**: 0/11
**未実施**: 11/11

**総合判定**: [未実施]

---

## 不具合記録

### 不具合-01: [タイトル]
**発生テストケース**:
**症状**:
**再現手順**:
**期待される動作**:
**実際の動作**:
**対応**:

---

## 備考

- テストは実装完了後（GREENフェーズ後）に実施する
- すべてのテストが合格するまでREFACTORフェーズに進まない
- 不合格の場合は実装を修正してテストを再実施
- 特にTC-07（#[Test]属性形式検証）は重要。Laravel 11 / PHPUnit 10-11の推奨形式を厳守

---

*作成日時: 2025-10-24 17:00*
*次のフェーズ: GREEN（実装）*
