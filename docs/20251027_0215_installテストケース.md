# Laravel用install.sh テストケース

**作成日時**: 2025-10-27 02:15
**対象**: templates/laravel/install.sh
**テストタイプ**: 手動テスト

---

## テスト環境

- **Bash**: version 3.2以上
- **テスト対象プロジェクト**: 既存のLaravelプロジェクト
- **前提条件**:
  - install.shが存在
  - 基本的なUnixコマンドが使用可能

---

## テストケース一覧

### TC-01: Laravelプロジェクトチェックテスト（成功）

**目的**: Laravelプロジェクトで実行した場合、チェックが通ることを確認

**前提条件**:
- 既存のLaravelプロジェクトディレクトリにいる
- artisanファイルが存在する
- composer.jsonが存在する

**実施手順**:
1. Laravelプロジェクトのルートディレクトリに移動
2. install.shを実行
3. 初期チェックの結果を確認

**期待結果**:
- Laravelプロジェクトとして認識される
- エラーが発生しない
- インストール処理が続行される

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-02: 非Laravelプロジェクトエラーテスト

**目的**: Laravelプロジェクトでない場合、エラーが表示され中断されることを確認

**前提条件**:
- Laravelプロジェクトでないディレクトリにいる
- artisanファイルが存在しない

**実施手順**:
1. 非Laravelプロジェクトディレクトリに移動
2. install.shを実行
3. エラーメッセージを確認

**期待結果**:
- エラーメッセージが表示される
- 「このスクリプトはLaravelプロジェクト用です」等のメッセージ
- インストールが中断される（exit 1）

**実際の結果**:
[実施時に記録]

**エラーメッセージ**:
```
[記録]
```

**判定**: [合格/不合格]

---

### TC-03: 新規インストールテスト（クリーンインストール）

**目的**: .claude/skills/が存在しない場合、正しくインストールされることを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる
- .claude/skills/ディレクトリが存在しない

**実施手順**:
1. .claude/skills/が存在しないことを確認
2. install.shを実行
3. インストール結果を確認

**期待結果**:
- .claude/skills/ディレクトリが作成される
- すべてのSkillsがコピーされる
  - tdd-init/SKILL.md
  - tdd-plan/SKILL.md
  - tdd-plan/templates/PLAN.md.template
  - tdd-red/SKILL.md
  - tdd-green/SKILL.md
  - tdd-refactor/SKILL.md
  - tdd-review/SKILL.md
- docs/tdd/.gitkeepが作成される
- 成功メッセージが表示される

**実際の結果**:
[実施時に記録]

**作成されたファイル**:
- .claude/skills/tdd-init/SKILL.md: [存在する/存在しない]
- .claude/skills/tdd-plan/SKILL.md: [存在する/存在しない]
- .claude/skills/tdd-plan/templates/PLAN.md.template: [存在する/存在しない]
- .claude/skills/tdd-red/SKILL.md: [存在する/存在しない]
- .claude/skills/tdd-green/SKILL.md: [存在する/存在しない]
- .claude/skills/tdd-refactor/SKILL.md: [存在する/存在しない]
- .claude/skills/tdd-review/SKILL.md: [存在する/存在しない]
- docs/tdd/.gitkeep: [存在する/存在しない]

**判定**: [合格/不合格]

---

### TC-04: 既存インストール警告テスト

**目的**: .claude/skills/が既に存在する場合、警告が表示されることを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる
- .claude/skills/ディレクトリが既に存在する

**実施手順**:
1. 事前に.claude/skills/ディレクトリを作成
2. install.shを実行
3. 警告メッセージを確認

**期待結果**:
- 警告メッセージが表示される
- 「.claude/skills/は既に存在します」等のメッセージ
- 上書きするか確認される
- Noを選択すると中断される

**実際の結果**:
[実施時に記録]

**警告メッセージ**:
```
[記録]
```

**判定**: [合格/不合格]

---

### TC-05: 上書きインストールテスト

**目的**: 既存インストールに対して上書きできることを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる
- .claude/skills/ディレクトリが既に存在する

**実施手順**:
1. install.shを実行
2. 上書き確認でYesを選択
3. インストール結果を確認

**期待結果**:
- 既存のファイルが上書きされる
- すべてのSkillsが最新版に更新される
- 成功メッセージが表示される

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-06: ディレクトリ作成テスト

**目的**: 必要なディレクトリが正しく作成されることを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる

**実施手順**:
1. install.shを実行
2. 作成されたディレクトリを確認

**期待結果**:
- .claude/skills/が作成される
- docs/tdd/が作成される
- 適切な権限が設定される

**実際の結果**:
[実施時に記録]

**作成されたディレクトリ**:
- .claude/: [存在する/存在しない]
- .claude/skills/: [存在する/存在しない]
- docs/: [存在する/存在しない]
- docs/tdd/: [存在する/存在しない]

**判定**: [合格/不合格]

---

### TC-07: Skillsコピーテスト

**目的**: すべてのSkillsが正しくコピーされることを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる
- install.shを実行済み

**実施手順**:
1. 各Skillのファイルを確認
2. ファイル内容が正しいか確認

**期待結果**:
- 6つのSkillsすべてが存在する
- 各SKILL.mdの内容が正しい
- YAMLフロントマターが含まれている

**実際の結果**:
[実施時に記録]

**各Skillの検証**:
- tdd-init: [合格/不合格]
- tdd-plan: [合格/不合格]
- tdd-red: [合格/不合格]
- tdd-green: [合格/不合格]
- tdd-refactor: [合格/不合格]
- tdd-review: [合格/不合格]

**判定**: [合格/不合格]

---

### TC-08: PLAN.md.templateコピーテスト

**目的**: PLAN.md.templateが正しくコピーされることを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる
- install.shを実行済み

**実施手順**:
1. .claude/skills/tdd-plan/templates/PLAN.md.templateを確認
2. 内容を確認

**期待結果**:
- ファイルが存在する
- テンプレートの内容が正しい

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-09: CLAUDE.md作成テスト（新規）

**目的**: CLAUDE.mdが存在しない場合、作成されることを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる
- CLAUDE.mdが存在しない

**実施手順**:
1. CLAUDE.mdが存在しないことを確認
2. install.shを実行
3. CLAUDE.mdを確認

**期待結果**:
- CLAUDE.mdが作成される
- テンプレートの内容が含まれている

**実際の結果**:
[実施時に記録]

**CLAUDE.md内容の検証**:
- プロジェクト設定が含まれている: [Yes/No]
- TDDワークフローの説明がある: [Yes/No]

**判定**: [合格/不合格]

---

### TC-10: CLAUDE.md保護テスト（既存）

**目的**: CLAUDE.mdが既に存在する場合、上書きされないことを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる
- CLAUDE.mdが既に存在する

**実施手順**:
1. 既存のCLAUDE.mdを作成（内容をメモ）
2. install.shを実行
3. CLAUDE.mdの内容を確認

**期待結果**:
- 既存のCLAUDE.mdが保護される
- 上書きされない
- 警告メッセージが表示される

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-11: 成功メッセージテスト

**目的**: インストール完了時に適切なメッセージが表示されることを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる
- install.shを実行

**実施手順**:
1. install.shを最後まで実行
2. 完了メッセージを確認

**期待結果**:
- 成功メッセージが表示される
- インストールされたファイルの一覧が表示される
- 次のステップ（/tdd-init実行）の案内がある

**実際の結果**:
[実施時に記録]

**表示されたメッセージ**:
```
[記録]
```

**判定**: [合格/不合格]

---

### TC-12: 権限エラーテスト

**目的**: 書き込み権限がない場合、適切なエラーが表示されることを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる
- .claude/に書き込み権限がない

**実施手順**:
1. .claude/の書き込み権限を削除
2. install.shを実行
3. エラーメッセージを確認
4. 権限を復元

**期待結果**:
- エラーメッセージが表示される
- 「権限がありません」等のメッセージ
- インストールが中断される

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-13: idempotency テスト（べき等性）

**目的**: インストールを複数回実行しても安全であることを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる

**実施手順**:
1. install.shを1回目実行
2. install.shを2回目実行（上書き確認でYes）
3. 結果を確認

**期待結果**:
- 2回目も正常に実行できる
- ファイルが正しく上書きされる
- エラーが発生しない

**実際の結果**:
[実施時に記録]

**判定**: [合格/不合格]

---

### TC-14: スクリプトパステスト（相対パス）

**目的**: 異なる場所からinstall.shを実行しても正しく動作することを確認

**前提条件**:
- Laravelプロジェクトディレクトリにいる

**実施手順**:
1. Laravelプロジェクトのルートで実行
2. サブディレクトリから相対パスで実行
3. 絶対パスで実行

**期待結果**:
- どの場所から実行しても正しく動作する
- ファイルのコピー元が正しく解決される

**実際の結果**:
[実施時に記録]

**実行方法別の結果**:
- ルートディレクトリから: [合格/不合格]
- サブディレクトリから: [合格/不合格]
- 絶対パス指定: [合格/不合格]

**判定**: [合格/不合格]

---

## テスト実施記録

**実施日**: [未実施]
**実施者**: [名前]
**使用環境**:
- OS:
- Bash バージョン:
- Laravelプロジェクト:

### 総合結果

| テストケース | 判定 | 備考 |
|------------|------|------|
| TC-01: Laravelプロジェクトチェック（成功） | [未実施] | |
| TC-02: 非Laravelプロジェクトエラー | [未実施] | |
| TC-03: 新規インストール | [未実施] | |
| TC-04: 既存インストール警告 | [未実施] | |
| TC-05: 上書きインストール | [未実施] | |
| TC-06: ディレクトリ作成 | [未実施] | |
| TC-07: Skillsコピー | [未実施] | |
| TC-08: PLAN.md.templateコピー | [未実施] | |
| TC-09: CLAUDE.md作成（新規） | [未実施] | |
| TC-10: CLAUDE.md保護（既存） | [未実施] | |
| TC-11: 成功メッセージ | [未実施] | |
| TC-12: 権限エラー | [未実施] | |
| TC-13: idempotency | [未実施] | |
| TC-14: スクリプトパス | [未実施] | |

**合格数**: 0/14
**不合格数**: 0/14
**未実施**: 14/14

**総合判定**: [未実施]

---

## 不具合記録

### 不具合-01: [タイトル]
**発生テストケース**:
**症状**:
**再現手順**:
**期待される動作**:
**実際の動作**:
**対応**:

---

## 備考

- テストはGREENフェーズ完了後に実施する
- TC-01, TC-02は重要（Laravelプロジェクト判定）
- TC-04, TC-05は上書き処理の確認に重要
- TC-09, TC-10はCLAUDE.md保護の確認に重要
- TC-13はべき等性の確認に重要（複数回実行しても安全）
- TC-14はスクリプトの移植性の確認に重要

---

*作成日時: 2025-10-27 02:15*
*次のフェーズ: GREEN（実装）*
